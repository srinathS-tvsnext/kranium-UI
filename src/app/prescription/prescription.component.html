<div *ngIf="!date_status.Previousdate">
    <div class="" *ngFor="let sub_menu of acess_rights; let i =index;">
        <div class="" *ngFor="let sub_view_menu of sub_menu.sub_view; let i =index;">
            <div>
                <div class="panel panel-default" *ngIf="sub_view_menu.sub_view_name=='Medication'">
                    <div class="panel-body">
                        <div class="container-fluid">
                            <!-- <button type="button" class="btn btn-steelblue pull-right" (click)="investigationlistpopupclose()">Clear Chart</button> -->
                            <div>
                                <div class="col-md-3">
                            <button type="button" class="btn btn-steelblue" routerLink='/Homescreen/Patientdetails/Previousprescription'>Previous Prescription</button>
                            </div>
                            <div class="col-md-3">
                                <mat-form-field>
                                    <mat-select class="pull-right " placeholder="Favourite prescription" (change)="edittemp_pres(med)" [(ngModel)]="med">
                                        <mat-option *ngFor="let foods of template_pres_data" [value]="foods">
                                            {{ foods.template_name }}
                                        </mat-option>
                                    </mat-select>
                                    </mat-form-field>
                            </div>
                            <div class="col-md-3">
                                <mat-form-field>
                                    <mat-select class="pull-right " placeholder="Favourite Drug" (change)="edittemp_drug(med_drug)" [(ngModel)]="med_drug">
                                        <mat-option *ngFor="let food of template_drug_data" [value]="food">
                                            {{ food.template_name }}
                                        </mat-option>
                                    </mat-select>
                                    </mat-form-field>
                            </div>
                            </div>
                        </div>
                        <div class="">
                            <p class="headercolor">Medication</p>
                            <!-- <div class="row" [hidden]="hide"> -->
                            <div class="row">
                                <div class="col-lg-12 col-md-12" style="padding-bottom:20px;">
                                    <div class="col-lg-6 col-md-6">
                                        <mat-form-field style='width:100%;padding-top:7px;'>
                                            <input matInput list="browsbrand" name="browsbrand" placeholder="Brand / Generic Name" [(ngModel)]="med.brand_gen_name" (ngModelChange)="get_medicine_kranium_list(med.brand_gen_name)">
                                        </mat-form-field>
                                        <!-- <datalist id="browsbrand">
                                                    <option *ngFor="let state of medicine_kranium_list" value="{{state.itemname}}">
                                                </datalist> -->
                                        <ul id="browsbrand" class="searchmodalcustom list-unstyled search-acc-list-ul" *ngIf="dropdown_hide">
                                            <li class="container-fluid  cursor search-acc-list" *ngFor="let data of medicine_kranium_list" class="padding: 5px;">
                                                <div class="row search-acc-list">
                                                    <div class="col-lg-12 col-md-12" (click)="data_click_bind(data.itemname)"><span> {{data.itemname}}</span><br><span style="color:grey;">({{data.genericname}})</span></div>
                                                </div>
                                            </li>
                                        </ul>




                                        <!-- <ul id="browsbrand" style="">
                                                    <li id="browsbrand" class="dropdown dropdown-fw dropdown-mega">
                                                        <a class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false" data-animation="fade" role="button" style="display: none"></a>
                                                        <ul class="dropdown-menu gobalsearch" role="menu">
                                                            <li role="presentation">
                                                                <div class="row" style="width: 100% !important">
                                                                    <ul class="list-unstyled search-acc-list-ul " style="">
                                                                        <li class="container-fluid  cursor search-acc-list" *ngFor="let data of medicine_kranium_list" class="border-bottom: 1px solid #e4eaec;
                                                                        padding-bottom: 8px;">
                                                                            <div class="row search-acc-list">
                                                                                <div class="col-md-12" align="center"><span> {{data.itemname}}</span></div>
                                                                            </div>
                                                                        </li> -->
                                        <!-- <li class="container-fluid" *ngIf="medicine_kranium_list.length == 0">
                                                                            <div class="row search-acc-list">
                                                                                <div class="col-md-12" align="center"><span> No data</span></div>
                                                                            </div>
                                                                        </li> -->
                                        <!-- </ul>
                                                                </div>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                </ul> -->


                                        <!-- <div class='col-md-3 form-group'>
                                                    <input type="text" placeholder="Choose Department Name" auto-complete [(ngModel)]="med.brand_gen_name" (ngModelChange)="get_medicine_kranium_list(med.brand_gen_name)" #album="ngModel" name="Department" [source]="medicine_kranium_list" value-formatter="itemname"
                                                        list-formatter="itemname" [match-formatted]="true" class="form-control" style="border-radius:0px;width:250px" max-num-list="10" required />
                                                </div> -->
                                    </div>
                                    <!-- <div class="col-md-4">
                                                < mat-form-field style='width:100%;padding-top:7px;'>
                                                    <input matInput list="browsgeneric" placeholder="Generic Name" [(ngModel)]="med.generic_ss_name" (ngModelChange)="get_medicine_kranium_list_gen(med.generic_ss_name)">
                                                </mat-form-field>
                                                <datalist id="browsgeneric">
                                  <option *ngFor="let state of medicine_kranium_list" value="{{state.genericname}}">
                                </datalist>
                                            </div> -->
                                    <div class="col-lg-6 col-md-6"><span><img class="clearicon" src="../../assets/img/clearicon.png" (click)="clrprocedure()"></span></div>
                                </div>
                                <div class="col-lg-12 col-md-12">
                                    <div class="col-lg-2 col-md-6">
                                        <!-- <ng-select [allowClear]="true" [items]="items" [disabled]="disabled" (data)="refreshValue($event)" (selected)="selected($event)"
                          (removed)="removed($event)" (typed)="typed($event)" (deselected)="onDeselected($event)" [(ngModel)]="med.brand_name"
                          placeholder="Select Brandname">
                        </ng-select> -->
                                        <mat-form-field class="setwdh">
                                        <mat-select placeholder="Brand Name" style='width:100%;' [(ngModel)]="med.brand_name">
                                            <mat-option *ngFor="let food of barand_gen_name" [value]="food.itemname">
                                                {{ food.itemname }}
                                            </mat-option>
                                        </mat-select>
                                        </mat-form-field>
                                        <!-- < mat-form-field style='width:100%;padding-top:7px;'>
                                                    <input matInput placeholder="Brand Name" [(ngModel)]="med.brand_name">
                                                </mat-form-field> -->
                                        <!-- <datalist id="browsbrand">
                          <option *ngFor="let state of medicine_kranium_list" value="{{state.itemname}}">
                        </datalist> -->
                                        <!-- < mat-form-field style='width:100%;padding-top:7px;'>
                          <input matInput placeholder="Brand Name" value='Dolo 650' [(ngModel)]="med.brand_name">
                        </mat-form-field> -->
                                    </div>
                                    <div class="col-lg-2 col-md-6">
                                        <mat-form-field class="setwdh">
                                            <input matInput placeholder="Generic Name" value="Sushi" [(ngModel)]="med.generic_name" (ngModelChange)="genericby_brandname(med.generic_name)">
                                        </mat-form-field>
                                        <!-- <datalist id="browsgeneric">
                          <option *ngFor="let state of medicine_kranium_list" value="{{state.genericname}}">
                        </datalist> -->
                                        <!-- < mat-form-field style='width:100%;padding-top:7px;'>
                          <input matInput placeholder="Generic Name" value='loreum ipsum' [(ngModel)]="med.generic_name">
                        </mat-form-field> -->
                                        <!-- <ng-select [allowClear]="true" [items]="items" [disabled]="disabled" (data)="refreshValue($event)" (selected)="selected($event)"
                          (removed)="removed($event)" (typed)="typed($event)" (deselected)="onDeselected($event)" [(ngModel)]="med.generic_name"
                          placeholder="Select Brandname">
                        </ng-select> -->
                                    </div>
                                    <div class="col-lg-2 col-md-6">
                                            <mat-form-field class="setwdh">
                                        <mat-select placeholder="Frequency" style='width:100%;' [(ngModel)]="med.frequency">
                                            <mat-option *ngFor="let food of prescr" [value]="food.viewValue">
                                                {{ food.viewValue }}
                                            </mat-option>
                                        </mat-select>
                                        </mat-form-field>
                                    </div>
                                    <div class="col-lg-2 col-md-6">
                                            <mat-form-field class="setwdh">
                                        <mat-select placeholder="Timing" style='width:100%;' [(ngModel)]="med.timing">
                                            <mat-option *ngFor="let food of timing" [value]="food.viewValue">
                                                {{ food.viewValue }}
                                            </mat-option>
                                        </mat-select>
                                        </mat-form-field>
                                    </div>
                                    <div class="col-lg-1 col-md-6">
                                        <mat-form-field class="setwdh">
                                            <input matInput placeholder="Duration" value='2' [(ngModel)]="med.duration_no">
                                            <!-- <mat-error *ngIf="numberFormControl.hasError('pattern')">
                                                Use Only <strong>Numeric</strong>
                                            </mat-error> -->
                                        </mat-form-field>
                                    </div>
                                    <div class="col-lg-2 col-md-6">
                                            <mat-form-field class="setwdh">
                                        <mat-select placeholder="Days"  [(ngModel)]="med.duration_capt">
                                            <mat-option *ngFor="let food of day" [value]="food.viewValue">
                                                {{ food.viewValue }}
                                            </mat-option>
                                        </mat-select>
                                        </mat-form-field>
                                    </div>
                                    <div class="col-lg-1 col-md-12" style="padding: 15px;" *ngIf="sub_view_menu.add_edit">
                                        <!-- <span *ngIf="sub_view_menu.add_edit" class='pull-right' style='padding-left:40px;font-size:25px; color: steelblue;'>
                                                            <i class="fa fa-plus-square" aria-hidden="true" (click)="save_consultation_notes(diagno_consultationnotes)"></i>
                                                          </span> -->
                                        <span class="medication-fields" *ngIf="datevalidation.nowdate">
                                                    <span *ngIf="btn=='Add'"> <i class="fa fa-plus-square" aria-hidden="true" style="cursor:pointer; color:steelblue;font-size: 25px;" (click)="add_medicine_temperary(med)"></i></span>
                                        <span *ngIf="btn=='Update'"> <i class="fa fa-pencil-square-o" aria-hidden="true" style="cursor:pointer; color:steelblue;font-size: 25px;" (click)="add_medicine_temperary(med)"></i></span>
                                        <i class="fa fa-window-close" aria-hidden="true" style="cursor:pointer; color:tomato;font-size: 25px;" (click)="cancel_pres()"> </i>
                                        </span>
                                        <!-- <button type="button" class="btn btn-steelblue" (click)="add_medicine(med)">{{btn_pres}}</button>
                        <button type="button" class="btn btn-steelblue" (click)="cancel_pres()">Cancel</button> -->
                                    </div>
                                </div>
                            </div>


                            <!-- <div class="row" [hidden]="!hide">
                    <div class="col-md-12">
                      <div class="col-md-2">
                        < mat-form-field style='width:100%;padding-top:7px;'>
                          <input matInput placeholder="Brand Name" value='Dolo 650' [(ngModel)]="med.brand_name">
                        </mat-form-field>
                      </div>
                      <div class="col-md-2">
                        < mat-form-field style='width:100%;padding-top:7px;'>
                          <input matInput placeholder="Generic Name" value='loreum ipsum' [(ngModel)]="med.generic_name">
                        </mat-form-field>
                      </div>
                      <div class="col-md-2">
                        <mat-select placeholder="Frequency" style='width:100%;' [(ngModel)]="med.frequency">
                          <mat-option *ngFor="let food of prescr" [value]="food.viewValue">
                            {{ food.viewValue }}
                          </mat-option>
                        </mat-select>
                      </div>
                      <div class="col-md-2">
                        < mat-form-field style='width:100%;padding-top:6px;'>
                          <input matInput placeholder="Duration" value='2' [(ngModel)]="med.duration_no">
                        </mat-form-field>
                      </div>
                      <div class="col-md-2">
                        <mat-select placeholder="Days" style='width:100%;padding-top:13px;' [(ngModel)]="med.duration_capt">
                          <mat-option *ngFor="let food of day" [value]="food.viewValue">
                            {{ food.viewValue }}
                          </mat-option>
                        </mat-select>
                      </div>
                      <div class="col-md-2">
                        <button type="button" class="btn btn-steelblue" (click)="add_medicine_drug(med)">{{btn_pres}}</button>
                        <button type="button" class="btn btn-steelblue" (click)="cancel_pres()">Cancel</button>
                      </div>
                    </div>
                  </div> -->
                        </div>
                    </div>
                </div>
                <div class="panel panel-default" *ngIf="sub_view_menu.sub_view_name=='Notes'">
                    <div class="panel-body">
                        <div class="table-responsive">
                            <table class="table table borderless" style='text-align: center'>
                                <thead class="headercolor">
                                    <tr>
                                        <th style='text-align: center'>Medication Name</th>
                                        <th style='text-align: center'>Quantity</th>
                                        <th style='text-align: center'>Route</th>
                                        <th style='text-align: center'>Frequency</th>
                                        <th style='text-align: center'>Timing</th>
                                        <th style='text-align: center'>Duration</th>
                                        <th style='text-align: center'>Favourite</th>
                                        <th style='text-align: center'>&nbsp; </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let tem_data of template_pres_med_data; let i=index;">
                                        <td *ngIf="tem_data.quantitystatus" style="color:red;width:30%">
                                            <span class="wordbreak">{{tem_data.brand_name}}</span>
                                            <br><span style="font-size:11px;">({{tem_data.generic_name}})</span>
                                            <i class="material-icons" style="font-size:16px;" (click)="GET_similar_medicines(tem_data)">info</i>
                                        </td>

                                        <td *ngIf="!tem_data.quantitystatus">{{tem_data.brand_name}}
                                            <br><span style="font-size:11px;">({{tem_data.generic_name}})</span>
                                        </td>
                                        <td>{{tem_data.quantity}}</td>
                                        <td> - </td>
                                        <td>{{tem_data.frequency}}</td>
                                        <td>{{tem_data.timing}}</td>
                                        <td>{{tem_data.duration_no}} {{tem_data.duration_capt}}</td>
                                        <td>
                                            <mat-checkbox color='primary' [(ngModel)]="tem_data.fav"></mat-checkbox>
                                        </td>
                                        <td>
                                            <span *ngIf="sub_view_menu.add_edit" [hidden]="hide_editbtn">
                            <i class="material-icons" style="cursor:pointer; color:steelblue;" (click)='edittemp_drug_new(tem_data)'>edit</i>
                            <i class="material-icons" style="cursor:pointer; color:tomato;" (click)='deteletemp_drug_new(tem_data)'>delete</i>
                          </span>
                                        </td>

                                    </tr>

                                </tbody>
                            </table>
                        </div>
                        <div class="">
                            <p class="headercolor">Notes</p>
                            <div>
                                <mat-form-field style='width:100%;'>
                                    <input matInput #message maxlength="256" [(ngModel)]="template_pres_med_data.notes">
                                    <mat-hint align="start">
                                        <strong>Don't disclose personal info</strong>
                                    </mat-hint>
                                    <mat-hint align="end">{{message.value.length}} / 256</mat-hint>
                                </mat-form-field>
                            </div>
                            <div>
                                    <mat-form-field>
                                <mat-select placeholder="Choose Language" [(ngModel)]="template_pres_med_data.language" (ngModelChange)="change_language(template_pres_med_data.language)">
                                    <mat-option *ngFor="let lang of language_list" [value]="lang">
                                        {{ lang.language_name }}
                                    </mat-option>
                                </mat-select>
                                </mat-form-field>
                                <div class="pull-right">
                                    <!-- <button type="button" class="btn btn-steelblue" routerLink='/Homescreen/Patientdetails/Previousprescription'>Previous Prescription</button>
            
                      <button type="button" class="btn btn-steelblue">Print</button>
            
                      <button type="button" class="btn btn-steelblue">Save</button> -->
                                    <span *ngIf="datevalidation.nowdate">
                                                <span *ngIf="sub_view_menu.add_edit">
                                                    <button type="button" class="btn btn-steelblue" (click)="add_save_favourite_pres(template_pres_med_data)">Save as Favourite</button>
                                                </span>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div *ngIf="sub_view_menu.sub_view_name=='Diet Advice'">
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <p class="bolder">Diet Advice(If any):</p>
                            <mat-form-field class="example-full-width" style='width:100%;'>
                                <input matInput #message maxlength="256" placeholder="Message" [(ngModel)]="template_pres_med_data.diet_advice">
                                <mat-hint align="start">
                                    <strong>Don't disclose personal info</strong>
                                </mat-hint>
                                <mat-hint align="end">{{message.value.length}} / 256</mat-hint>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="pull-right">
                        <span *ngIf="datevalidation.nowdate">
                                <span *ngIf="sub_view_menu.view">
                                    <span *ngIf="pres_data">
                                        <button type="button" class="btn btn-steelblue" (click)="printPreview()">Print Preview</button>
                                    </span>
                                </span>
                        <span *ngIf="sub_view_menu.add_edit">
                                    <button type="button" class="btn btn-steelblue" (click)="add_prescription_normal(template_pres_med_data)">Save</button>
                                </span>
                        </span>
                    </div>
                </div>

                <div class="row" id="printSectionId" style="display:none;">
                    <div class="col-md-12">
                        <div class="panel panel-default">
                            <div class="panel-body">
                                <p class=""><strong>Prescription</strong></p>
                                <div class="col-md-12" *ngFor="let prescri_mail of pres_doct">
                                    <p><strong>{{prescri_mail.cretaedby}}</strong></p>
                                </div>
                                <div class="table-responsive">
                                    <table class="table table borderless" style='text-align: center'>
                                        <thead class="tableheadercolor">
                                            <tr>
                                                <th style='text-align: center'>&nbsp;</th>
                                                <th style='text-align: center'>Medication Name</th>
                                                <th style='text-align: center'>Preparation</th>
                                                <th style='text-align: center'>Route</th>
                                                <th style='text-align: center'>{{language_mrg || "Morning"}} / {{language_aftn || "Afternoon"}} / {{language_nigt || "Night"}}</th>
                                                <th style='text-align: center'>Duration</th>
                                                <th style='text-align: center'>Medicine Timing</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let prescri of pres_data">
                                                <td>&nbsp;</td>
                                                <td>{{prescri.brand_name}} <br> <small>( {{prescri.generic_name}} )</small></td>
                                                <td> - </td>
                                                <td> - </td>
                                                <td>{{prescri.frequency}}</td>
                                                <td>{{prescri.duration_no}} {{prescri.duration_capt}}</td>
                                                <td *ngIf="prescri.timing == 'Before Food'"> {{language_bf || prescri.timing}}</td>
                                                <td *ngIf="prescri.timing == 'After Food'"> {{language_af || prescri.timing}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div *ngIf="date_status.Previousdate">
    <div class="" *ngFor="let sub_menu of acess_rights; let i =index;">
        <div class="" *ngFor="let sub_view_menu of sub_menu.sub_view; let i =index;">
            <div>
                <div class="panel panel-default" *ngIf="sub_view_menu.sub_view_name=='Medication'">
                    <div class="panel-body">
                        <div class='table-responsive'>
                            <table class=" table font-weight-500" style='text-align: center'>
                                <thead class="headercolor" data-background-color="#AFE1F5">
                                    <tr>
                                        <td>Medication</td>
                                        <td>Frequency</td>
                                        <td>Route</td>
                                        <td>Preparation</td>
                                        <td>Duration</td>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let indv_socialmention of pres_data; let i = index">
                                        <td style="width: 40%;">{{indv_socialmention.brand_name}}<br>({{indv_socialmention.generic_name}}) </td>
                                        <td>{{indv_socialmention.frequency}}</td>
                                        <td>-</td>
                                        <td>-</td>
                                        <td>{{indv_socialmention.duration_no}} {{indv_socialmention.duration_capt}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="panel panel-default" *ngIf="sub_view_menu.sub_view_name=='Notes'">
                    <div class="panel-body">
                        <div class="">
                            <p class="headercolor">Language</p>
                            <div>
                                {{language}}
                            </div>
                        </div>
                        <div class="">
                            <p class="headercolor">Notes</p>
                            <div>
                                {{notes}}
                            </div>
                        </div>
                    </div>
                </div>
                <div *ngIf="sub_view_menu.sub_view_name=='Diet Advice'">
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <div class="">
                                <p class="headercolor bolder">Diet Advice(If any):</p>
                                <div>
                                    {{dietadvice}}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>